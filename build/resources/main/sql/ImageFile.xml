<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.keyboard.repository.ImageDao">
    <insert id="saveProductImage" parameterType="ImageEntity">
        INSERT INTO productpicture(product_id, img_path, img_name, img_size, img_type)
        VALUES (#{product_id}, #{img_path}, #{img_name}, #{img_size}, #{img_type})
    </insert>
    <select id="selectMainPictureByProductId" parameterType="Long" resultType="ImageEntity">
        SELECT * FROM productpicture where product_id = #{product_id} AND img_type = 'main_picture'
    </select>
    <select id="selectPictureByProductId" parameterType="Long" resultType="ImageEntity">
        SELECT * FROM productpicture where product_id = #{product_id}
    </select>
    <delete id="deletePictureByImgId" parameterType="Long">
        DELETE from productpicture where img_id = #{img_id}
    </delete>
    <delete id="deletePictureByProductId" parameterType="Long">
        DELETE from productpicture where product_id = #{product_id}
    </delete>
    <delete id="deleteMainPictureByProductId" parameterType="Long">
        DELETE from productpicture where product_id = #{product_id} AND img_type = 'main_picture'
    </delete>
</mapper>
